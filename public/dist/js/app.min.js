angular.module("myApp",["ui.router","uiRout","ngResource","MainCtl","PlyrCtl","GameCtl","MatchCtl","ScoreCtl","PlayerSrv","GameSrv","MatchSrv","ScoreSrv"]),angular.module("uiRout",[]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){c.html5Mode(!0),b.otherwise("/matches"),a.state("main",{views:{"":{templateUrl:"views/views/content.html"},"side@main":{templateUrl:"views/views/main.html"},"content@main":{template:"Main Page"}}}).state("main.players",{url:"/player",templateUrl:"views/views/player.html"}).state("main.games",{url:"/game",templateUrl:"views/views/game.html"}).state("matches",{views:{"":{templateUrl:"views/views/content.html"},"side@matches":{templateUrl:"views/views/main.html"},"content@matches":{templateUrl:"views/views/matches.html"}}}).state("matches.list",{url:"/matches",templateUrl:"views/views/matches.list.html"}).state("matches.match",{templateUrl:"views/views/match.html"}).state("matches.match.player-new",{templateUrl:"views/views/new-match-player.html"})}]),angular.module("GameCtl",[]).controller("gameController",["$scope","gameService","matchService",function(a,b){a.games="null",a.header="This is the game page",a.order="name",a.games=b.query(),a.addGame=function(){a.gname.length>0?(a.newGame=new b,a.newGame.name=a.gname,b.save(a.newGame,function(){a.games=b.query(),a.gname=""})):console.log("error")},a.findGame=function(c){a.i=a.games.indexOf(c),a.game=a.games[a.i],a.gname=a.game.name,a.selectGame=b.query({id:c._id})},a.updateGame=function(){(a.gname.length>0||null!==a.gname)&&(a.game.name=a.gname,b.update(a.game,function(){a.gname=""}))},a.deleteGame=function(c){a.ind=a.games.indexOf(c),a.games.splice(a.ind,1),b.delete({id:c._id},function(){})}}]),angular.module("MainCtl",["ui.router"]).controller("mainController",["$scope","$state","playerService","scoreService","gameService","matchService",function(a,b,c,d,e,f){a.header="This is the main page",a.message="start",a.changeView=function(c,d){a.match=d,b.go(c)},a.findPlayer=function(b){var c=a.players.indexOf(b);a.player=a.players[c]},a.findScore=function(b){var c=a.scores.indexOf(b);a.score=a.scores[c]},a.findGame=function(b){var c=a.games.indexOf(b);a.game=a.games[c]},a.findMatch=function(b){var c=a.matches.indexOf(b);a.match=a.matches[c]},a.scoreUpdate=function(b){var c=a.matches.indexOf(b);for(a.match=a.matches[c],i=0;i<a.match.scores.length;i++)d.update(a.match.scores[i])},a.addScore=function(b,c){a.newScore=new d,a.newScore.matchid=b,a.newScore.playerid=c,d.save(a.newScore,function(){var b=a.matches.indexOf(a.match);g(b)})},a.deleteScore=function(b){var c=a.match.scores.indexOf(b);a.match.scores.splice(c,1),d.delete({id:b._id},function(){})};var g=function(b){a.matches=f.query(function(){a.match=a.matches[b]})},h=function(){a.players=c.query(),a.scores=d.query(),a.games=e.query(),a.matches=f.query()};h()}]),angular.module("MatchCtl",[]).controller("matchController",["$scope","matchService","gameService",function(a,b,c){a.matches="null",a.header="This is the match page",a.order="name",a.matches=b.query(),a.games=c.query(),a.mgame=a.games[0],a.addMatch=function(){a.mname.length>0?(a.newMatch=new b,a.newMatch.name=a.mname,a.newMatch.gameid=a.mgame._id,b.save(a.newMatch,function(){a.matches=b.query(6),a.mname="",a.mgame={}})):console.log("error")},a.findMatch=function(c){a.match=b.get({id:c._id}),a.mname=a.match.name,a.mgame=a.match._game},a.updateMatch=function(){(a.mgame.length>0||null!==a.mgame)&&(a.match.name=a.mname,a.match.gameid=a.mgame._id,b.update(a.match,function(){a.mname="",a.match._game.name=a.mgame.name,a.mgame=null}))},a.deleteMatch=function(c){a.i=a.matches.indexOf(c),a.matches.splice(a.i,1),b.delete({id:c._id},function(){})}}]),angular.module("PlyrCtl",[]).controller("playerController",["$scope","playerService","matchService",function(a,b){a.players="null",a.header="This is the player page",a.order="name",a.players=b.query(),a.addPlayer=function(){a.pname.length>0&&(a.newPlayer=new b,a.newPlayer.name=a.pname,b.save(a.newPlayer,function(){a.players=b.query(),a.pname=""}))},a.findPlayer=function(b){a.i=a.players.indexOf(b),a.player=a.players[a.i],a.pname=a.player.name},a.updatePlayer=function(){(a.pname.length>0||null!==a.pname)&&(a.player.name=a.pname,b.update(a.player,function(){a.pname=""}))},a.deletePlayer=function(c){a.ind=a.players.indexOf(c),a.players.splice(a.ind,1),b.delete({id:c._id},function(){})}}]),angular.module("ScoreCtl",[]).controller("scoreController",["$scope","scoreService","matchService","playerService",function(a,b,c,d){a.scores="null",a.header="This is the score page",a.order="_.player.name",a.scores=b.query(),a.matches=c.query(),a.players=d.query(),a.addScore=function(){a.newScore=new b,a.newScore.matchid=a.smatch._id,a.newScore.playerid=a.splayer._id,b.save(a.newScore,function(){a.scores=b.query()})},a.findScore=function(b){a.i=a.scores.indexOf(b),a.score=a.scores[a.i],a.smatch=a.score._match,a.splayer=a.score._player},a.updateScore=function(){a.score.matchid=a.smatch._id,a.score.playerid=a.splayer._id,b.update(a.score,function(){a.scores=b.query()})},a.deleteScore=function(c){a.i=a.scores.indexOf(c),a.scores.splice(a.i,1),b.delete({id:c._id},function(){})}}]),angular.module("GameSrv",["ngResource"]).factory("gameService",["$resource",function(a){return a("/api/games/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("MatchSrv",["ngResource"]).factory("matchService",["$resource",function(a){return a("/api/matches/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("PlayerSrv",["ngResource"]).factory("playerService",["$resource",function(a){return a("/api/players/:id",{id:"@_id"},{update:{method:"PUT"}})}]),angular.module("ScoreSrv",["ngResource"]).factory("scoreService",["$resource",function(a){return a("/api/scores/:id",{id:"@_id"},{update:{method:"PUT"}})}]);